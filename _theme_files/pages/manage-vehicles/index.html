<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Vehicles</title>
    <script>
        // Authentication check before anything loads
        (function() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            if (isLoggedIn !== 'true') {
                window.location.replace('../../login.html');
                throw new Error('Not authenticated'); // Stops further JavaScript execution
            }
        })();
    </script><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../../assets/css/style.css">
    <link rel="stylesheet" href="../../assets/css/table.css">
</head>

<body>
    <div class="overlay"></div>
    <nav class="sidebar">
        <div class="logo">
            <i class="fas fa-ambulance"></i>
            Ambulance Admin
        </div>
        <a href="../../index.html" class="nav-item">
            <i class="fas fa-home"></i>
            Dashboard
        </a>
        <a href="../booking-history/index.html" class="nav-item ">
            <i class="fas fa-home"></i>
            Booking History
        </a>
        <a href="../manage-users/index.html" class="nav-item">
            <i class="fas fa-users"></i>
            Manage Users
        </a>
        <a href="../show-on-map/index.html" class="nav-item">
            <i class="fas fa-map-marker-alt"></i>
            Show on Map
        </a>
        <a href="../manage-drivers/index.html" class="nav-item">
            <i class="fas fa-id-card"></i>
            Manage Drivers
        </a>
        <a href="../manage-vehicles/index.html" class="nav-item active">
            <i class="fas fa-ambulance"></i>
            Manage Vehicles
        </a>
        <a href="../hospital/index.html" class="nav-item">
            <i class="fas fa-ambulance"></i>
            Hospital
        </a>
        <a href="../emergency-sos/index.html" class="nav-item">
            <i class="fas fa-exclamation-circle"></i>
            Emergency SOS
        </a>
        <a href="../help-and-support/index.html" class="nav-item">
            <i class="fas fa-headset"></i>
            Help & Support
        </a>
        <a href="../settings/index.html" class="nav-item">
            <i class="fas fa-cog"></i>
            Settings
        </a>
        <a href="#" class="nav-item" onclick="handleLogout()">
            <i class="fas fa-sign-out-alt"></i>
            Logout
        </a>
    </nav>

    <main class="main-content">
        <div class="header">
            <button class="menu-toggle">
                <i class="fas fa-bars"></i>
            </button>
            <h1>Manage Vehicles</h1>
        </div>
        
        <div class="table-container">
            <div class="table-header">
                <h2>Vehicles List</h2>
                <button class="add-button" onclick="openModal()">
                    <i class="fas fa-plus"></i> Add Vehicle
                </button>
            </div>
            <table class="responsive-table">
                <thead>
                    <tr>
                        <th>Vehicle ID</th>
                        <th>Model</th>
                        <th>Plate Number</th>
                        <th>Driver</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>#001</td>
                        <td>Toyota Hiace</td>
                        <td>ABC-1234</td>
                        <td>John Doe</td>
                        <td><span class="status active">Active</span></td>
                        <td>
                            
                            <button class="btn btn-edit" onclick="openModal(true)">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-delete">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    
        <div class="modal" id="formModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modalTitle">Add Vehicle</h3>
                    <button class="close-modal" onclick="closeModal()">&times;</button>
                </div>
                <form id="vehicleForm">
                    <div class="form-group">
                        <label>Model</label>
                        <input type="text" required>
                    </div>
                    <div class="form-group">
                        <label>Plate Number</label>
                        <input type="text" required>
                    </div>
                    <div class="form-group">
                        <label>Driver</label>
                        <select required>
                            <option value="">Select Driver</option>
                            <option value="John Doe">John Doe</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Status</label>
                        <select required>
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-cancel" onclick="closeModal()">Cancel</button>
                        <button type="submit" class="btn btn-save">Save</button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <script>
        function handleLogout() {
            // Clear login state
            localStorage.removeItem('isLoggedIn');
            localStorage.removeItem('userEmail');
            
            // Redirect to login page
            window.location.href = '../../login.html';
        }
        function openModal(isEdit = false) {
            document.getElementById('formModal').classList.add('active');
            document.getElementById('modalTitle').textContent = isEdit ? 'Edit Vehicle' : 'Add Vehicle';
        }
        function closeModal() {
            document.getElementById('formModal').classList.remove('active');
        }
    </script>
</body>

</html>
