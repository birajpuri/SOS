<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ambulance Admin</title>
    <script>
        // Authentication check before anything loads
        (function() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            if (isLoggedIn !== 'true') {
                window.location.replace('../../login.html');
                throw new Error('Not authenticated'); // Stops further JavaScript execution
            }
        })();
    </script><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../../assets/css/style.css">
    <link rel="stylesheet" href="../../assets/css/table.css">
</head>
<body>
    <div class="overlay"></div>
    <nav class="sidebar">
        <div class="logo">
            <i class="fas fa-ambulance"></i>
            Ambulance Admin
        </div>
        <a href="../../index.html" class="nav-item ">
            <i class="fas fa-home"></i>
            Dashboard
        </a>
        <a href="../booking-history/index.html" class="nav-item ">
            <i class="fas fa-home"></i>
            Booking History
        </a>
      
        <a href="../manage-users/index.html" class="nav-item">
            <i class="fas fa-users"></i>
            Manage Users
        </a>
        <a href="../show-on-map/index.html" class="nav-item">
            <i class="fas fa-map-marker-alt"></i>
            Show on Map
        </a>
        <a href="../manage-drivers/index.html" class="nav-item active">
            <i class="fas fa-id-card"></i>
            Manage Drivers
        </a>
        <a href="../manage-vehicles/index.html" class="nav-item">
            <i class="fas fa-ambulance"></i>
            Manage Vehicles
        </a>
        <a href="../hospital/index.html" class="nav-item">
            <i class="fas fa-ambulance"></i>
            Hospital
        </a>
        <a href="#" class="nav-item ">
            <i class="fas fa-exclamation-circle"></i>
            Emergency SOS
        </a>
        <a href="../help-and-support/index.html" class="nav-item">
            <i class="fas fa-headset"></i>
            Help & Support
        </a>
        <a href="../settings/index.html" class="nav-item">
            <i class="fas fa-cog"></i>
            Settings
        </a>
        <a href="#" class="nav-item" onclick="handleLogout()">
            <i class="fas fa-sign-out-alt"></i>
            Logout
        </a>
    </nav>
    <main class="main-content">
        <div class="header">
            <button class="menu-toggle"><i class="fas fa-bars"></i></button>
            <h1>Manage Drivers</h1>
        </div>
        <div class="table-container">
            <div class="table-header">
                <h2>Drivers List</h2>
                <button class="add-button" onclick="openModal('add')"><i class="fas fa-plus"></i> Add New</button>
            </div>
            <table class="responsive-table">
                <thead>
                    <tr>
                        <th>Location</th>
                        <th>Name</th>
                        <th>Status</th>
                        <th>License Number</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>New York</td>
                        <td>John Doe</td>
                        <td><span class="status active">Active</span></td>
                        <td>AB12345</td>
                        <td style="display: flex;gap: 5px;">
                            <button class="btn btn-view" onclick="openModal('view', 'John Doe', 'New York', 'Active', 'AB12345')"><i class="fas fa-eye"></i> View</button>
                            <button class="btn btn-edit" onclick="openModal('edit', 'John Doe', 'New York', 'Active', 'AB12345')"><i class="fas fa-edit"></i> Edit</button>
                            <button class="btn btn-delete" onclick="confirmDelete('John Doe')"><i class="fas fa-trash"></i> Delete</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <!-- Modal -->
        <div class="modal" id="formModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modalTitle">Add New Driver</h3>
                    <button class="close-modal" onclick="closeModal()">&times;</button>
                </div>
                <form id="driverForm">
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" id="driverName" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label>Location</label>
                        <input type="text" id="driverLocation" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label>Status</label>
                        <select id="driverStatus" class="form-select">
                            <option value="Active">Active</option>
                            <option value="Inactive">Inactive</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>License Number</label>
                        <input type="text" id="driverLicense" class="form-input" required>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-cancel" onclick="closeModal()">Cancel</button>
                        <button type="submit" class="btn btn-save">Save</button>
                    </div>
                </form>
            </div>
        </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="../../assets/js/driver-management.js"></script>
    <script>
        // DOM Elements
        const menuToggle = document.querySelector('.menu-toggle');
        const sidebar = document.querySelector('.sidebar');
        const mainContent = document.querySelector('.main-content');
        const overlay = document.querySelector('.overlay');
        const navItems = document.querySelectorAll('.nav-item');

        // Toggle sidebar
        function toggleSidebar() {
            sidebar.classList.toggle('expanded');
            overlay.classList.toggle('active');
        }

        // Event Listeners
        menuToggle.addEventListener('click', toggleSidebar);
        overlay.addEventListener('click', toggleSidebar);

        // Handle navigation item clicks
        navItems.forEach(item => {
            item.addEventListener('click', () => {
                navItems.forEach(nav => nav.classList.remove('active'));
                item.classList.add('active');
                if (window.innerWidth <= 1024) {
                    toggleSidebar();
                }
            });
        });

        function handleLogout() {
            localStorage.removeItem('isLoggedIn');
            localStorage.removeItem('userEmail');
            window.location.href = '../../login.html';
        }
    </script>
</body>
</html>
